import*as e from"react";import{flushSync as t}from"react-dom";import{Virtualizer as n,observeElementRect as o,observeElementOffset as r,elementScroll as u,observeWindowRect as i,observeWindowOffset as s,windowScroll as l}from"@tanstack/virtual-core";export*from"@tanstack/virtual-core";const a=typeof document!=="undefined"?e.useLayoutEffect:e.useEffect;function useVirtualizerBase(o){const r=e.useReducer((()=>({})),{})[1];const u={...o,onChange:(e,n)=>{var u;n?t(r):r();(u=o.onChange)==null?void 0:u.call(o,e,n)}};const[i]=e.useState((()=>new n(u)));i.setOptions(u);e.useEffect((()=>i._didMount()),[]);a((()=>i._willUpdate()));return i}function useVirtualizer(e){return useVirtualizerBase({observeElementRect:o,observeElementOffset:r,scrollToFn:u,...e})}function useWindowVirtualizer(e){return useVirtualizerBase({getScrollElement:()=>typeof document!=="undefined"?window:null,observeElementRect:i,observeElementOffset:s,scrollToFn:l,initialOffset:()=>typeof document!=="undefined"?window.scrollY:0,...e})}export{useVirtualizer,useWindowVirtualizer};

