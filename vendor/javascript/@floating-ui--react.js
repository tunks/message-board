import*as e from"react";import{useLayoutEffect as t,useEffect as n,useRef as o}from"react";import{stopEvent as r,isMouseLikePointerType as s,getDocument as c,contains as u,activeElement as i,isSafari as l,isTypeableCombobox as a,getTarget as f,isVirtualClick as d,isVirtualPointerEvent as v,getPlatform as m,isTypeableElement as g,isReactEvent as p,isRootElement as h,isEventTargetWithin as b,isMac as y,getUserAgent as E}from"@floating-ui/react/utils";import{floor as x,evaluate as w,max as R,round as I}from"@floating-ui/utils";import{getComputedStyle as M,isElement as C,getNodeName as O,isHTMLElement as k,getWindow as T,isLastTraversableNode as D,getParentNode as F,isWebKit as L}from"@floating-ui/utils/dom";import{tabbable as P,isTabbable as S}from"tabbable";import*as N from"react-dom";import{getOverflowAncestors as A,useFloating as K,offset as B,detectOverflow as _}from"@floating-ui/react-dom";export{arrow,autoPlacement,autoUpdate,computePosition,detectOverflow,flip,getOverflowAncestors,hide,inline,limitShift,offset,platform,shift,size}from"@floating-ui/react-dom";function useMergeRefs(t){return e.useMemo((()=>t.every((e=>e==null))?null:e=>{t.forEach((t=>{typeof t==="function"?t(e):t!=null&&(t.current=e)}))}),t)}const W={...e};const q=W.useInsertionEffect;const H=q||(e=>e());function useEffectEvent(t){const n=e.useRef((()=>{if(process.env.NODE_ENV!=="production")throw new Error("Cannot call an event handler while rendering.")}));H((()=>{n.current=t}));return e.useCallback((function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n.current==null?void 0:n.current(...t)}),[])}const V="ArrowUp";const j="ArrowDown";const U="ArrowLeft";const z="ArrowRight";function isDifferentRow(e,t,n){return Math.floor(e/t)!==n}function isIndexOutOfBounds(e,t){return t<0||t>=e.current.length}function getMinIndex(e,t){return findNonDisabledIndex(e,{disabledIndices:t})}function getMaxIndex(e,t){return findNonDisabledIndex(e,{decrement:true,startingIndex:e.current.length,disabledIndices:t})}function findNonDisabledIndex(e,t){let{startingIndex:n=-1,decrement:o=false,disabledIndices:r,amount:s=1}=t===void 0?{}:t;const c=e.current;let u=n;do{u+=o?-s:s}while(u>=0&&u<=c.length-1&&isDisabled(c,u,r));return u}function getGridNavigatedIndex(e,t){let{event:n,orientation:o,loop:s,cols:c,disabledIndices:u,minIndex:i,maxIndex:l,prevIndex:a,stopEvent:f=false}=t;let d=a;if(n.key===V){f&&r(n);if(a===-1)d=l;else{d=findNonDisabledIndex(e,{startingIndex:d,amount:c,decrement:true,disabledIndices:u});if(s&&(a-c<i||d<0)){const e=a%c;const t=l%c;const n=l-(t-e);d=t===e?l:t>e?n:n-c}}isIndexOutOfBounds(e,d)&&(d=a)}if(n.key===j){f&&r(n);if(a===-1)d=i;else{d=findNonDisabledIndex(e,{startingIndex:a,amount:c,disabledIndices:u});s&&a+c>l&&(d=findNonDisabledIndex(e,{startingIndex:a%c-c,amount:c,disabledIndices:u}))}isIndexOutOfBounds(e,d)&&(d=a)}if(o==="both"){const t=x(a/c);if(n.key===z){f&&r(n);if(a%c!==c-1){d=findNonDisabledIndex(e,{startingIndex:a,disabledIndices:u});s&&isDifferentRow(d,c,t)&&(d=findNonDisabledIndex(e,{startingIndex:a-a%c-1,disabledIndices:u}))}else s&&(d=findNonDisabledIndex(e,{startingIndex:a-a%c-1,disabledIndices:u}));isDifferentRow(d,c,t)&&(d=a)}if(n.key===U){f&&r(n);if(a%c!==0){d=findNonDisabledIndex(e,{startingIndex:a,decrement:true,disabledIndices:u});s&&isDifferentRow(d,c,t)&&(d=findNonDisabledIndex(e,{startingIndex:a+(c-a%c),decrement:true,disabledIndices:u}))}else s&&(d=findNonDisabledIndex(e,{startingIndex:a+(c-a%c),decrement:true,disabledIndices:u}));isDifferentRow(d,c,t)&&(d=a)}const o=x(l/c)===t;isIndexOutOfBounds(e,d)&&(d=s&&o?n.key===U?l:findNonDisabledIndex(e,{startingIndex:a-a%c-1,disabledIndices:u}):a)}return d}function buildCellMap(e,t,n){const o=[];let r=0;e.forEach(((e,s)=>{let{width:c,height:u}=e;if(c>t&&process.env.NODE_ENV!=="production")throw new Error("[Floating UI]: Invalid grid - item width at index "+s+" is greater than grid columns");let i=false;n&&(r=0);while(!i){const e=[];for(let n=0;n<c;n++)for(let o=0;o<u;o++)e.push(r+n+o*t);if(r%t+c<=t&&e.every((e=>o[e]==null))){e.forEach((e=>{o[e]=s}));i=true}else r++}}));return[...o]}function getCellIndexOfCorner(e,t,n,o,r){if(e===-1)return-1;const s=n.indexOf(e);const c=t[e];switch(r){case"tl":return s;case"tr":return c?s+c.width-1:s;case"bl":return c?s+(c.height-1)*o:s;case"br":return n.lastIndexOf(e)}}function getCellIndices(e,t){return t.flatMap(((t,n)=>e.includes(t)?[n]:[]))}function isDisabled(e,t,n){if(n)return n.includes(t);const o=e[t];return o==null||o.hasAttribute("disabled")||o.getAttribute("aria-disabled")==="true"}let X=0;function enqueueFocus(e,t){t===void 0&&(t={});const{preventScroll:n=false,cancelPrevious:o=true,sync:r=false}=t;o&&cancelAnimationFrame(X);const exec=()=>e==null?void 0:e.focus({preventScroll:n});r?exec():X=requestAnimationFrame(exec)}var Y=typeof document!=="undefined"?t:n;function sortByDocumentPosition(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}function areMapsEqual(e,t){if(e.size!==t.size)return false;for(const[n,o]of e.entries())if(o!==t.get(n))return false;return true}const G=e.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function FloatingList(t){const{children:n,elementsRef:o,labelsRef:r}=t;const[s,c]=e.useState((()=>new Map));const u=e.useCallback((e=>{c((t=>new Map(t).set(e,null)))}),[]);const i=e.useCallback((e=>{c((t=>{const n=new Map(t);n.delete(e);return n}))}),[]);Y((()=>{const e=new Map(s);const t=Array.from(e.keys()).sort(sortByDocumentPosition);t.forEach(((t,n)=>{e.set(t,n)}));areMapsEqual(s,e)||c(e)}),[s]);return e.createElement(G.Provider,{value:e.useMemo((()=>({register:u,unregister:i,map:s,elementsRef:o,labelsRef:r})),[u,i,s,o,r])},n)}function useListItem(t){t===void 0&&(t={});const{label:n}=t;const{register:o,unregister:r,map:s,elementsRef:c,labelsRef:u}=e.useContext(G);const[i,l]=e.useState(null);const a=e.useRef(null);const f=e.useCallback((e=>{a.current=e;if(i!==null){c.current[i]=e;if(u){var t;const o=n!==void 0;u.current[i]=o?n:(t=e==null?void 0:e.textContent)!=null?t:null}}}),[i,c,u,n]);Y((()=>{const e=a.current;if(e){o(e);return()=>{r(e)}}}),[o,r]);Y((()=>{const e=a.current?s.get(a.current):null;e!=null&&l(e)}),[s]);return e.useMemo((()=>({ref:f,index:i==null?-1:i})),[i,f])}function renderJsx(t,n){return typeof t==="function"?t(n):t?e.cloneElement(t,n):e.createElement("div",n)}const J=e.createContext({activeIndex:0,onNavigate:()=>{}});const Z=[U,z];const Q=[V,j];const $=[...Z,...Q];const ee=e.forwardRef((function Composite(t,n){const{render:o,orientation:r="both",loop:s=true,cols:c=1,disabledIndices:u,activeIndex:i,onNavigate:l,itemSizes:a,dense:f=false,...d}=t;const[v,m]=e.useState(0);const g=i!=null?i:v;const p=useEffectEvent(l!=null?l:m);const h=e.useRef([]);const b=o&&typeof o!=="function"?o.props:{};const y=e.useMemo((()=>({activeIndex:g,onNavigate:p})),[g,p]);const E=c>1;function handleKeyDown(e){if(!$.includes(e.key))return;let t=g;const n=getMinIndex(h,u);const o=getMaxIndex(h,u);if(E){const i=a||Array.from({length:h.current.length},(()=>({width:1,height:1})));const l=buildCellMap(i,c,f);const d=l.findIndex((e=>e!=null&&!isDisabled(h.current,e,u)));const v=l.reduce(((e,t,n)=>t==null||isDisabled(h.current,t,u)?e:n),-1);const m=l[getGridNavigatedIndex({current:l.map((e=>e?h.current[e]:null))},{event:e,orientation:r,loop:s,cols:c,disabledIndices:getCellIndices([...u||h.current.map(((e,t)=>isDisabled(h.current,t)?t:void 0)),void 0],l),minIndex:d,maxIndex:v,prevIndex:getCellIndexOfCorner(g>o?n:g,i,l,c,e.key===j?"bl":e.key===z?"tr":"tl")})];m!=null&&(t=m)}const i={horizontal:[z],vertical:[j],both:[z,j]}[r];const l={horizontal:[U],vertical:[V],both:[U,V]}[r];const d=E?$:{horizontal:Z,vertical:Q,both:$}[r];t===g&&[...i,...l].includes(e.key)&&(t=s&&t===o&&i.includes(e.key)?n:s&&t===n&&l.includes(e.key)?o:findNonDisabledIndex(h,{startingIndex:t,decrement:l.includes(e.key),disabledIndices:u}));if(t!==g&&!isIndexOutOfBounds(h,t)){e.stopPropagation();d.includes(e.key)&&e.preventDefault();p(t);queueMicrotask((()=>{enqueueFocus(h.current[t])}))}}const x={...d,...b,ref:n,"aria-orientation":r==="both"?void 0:r,onKeyDown(e){d.onKeyDown==null||d.onKeyDown(e);b.onKeyDown==null||b.onKeyDown(e);handleKeyDown(e)}};return e.createElement(J.Provider,{value:y},e.createElement(FloatingList,{elementsRef:h},renderJsx(o,x)))}));const te=e.forwardRef((function CompositeItem(t,n){const{render:o,...r}=t;const s=o&&typeof o!=="function"?o.props:{};const{activeIndex:c,onNavigate:u}=e.useContext(J);const{ref:i,index:l}=useListItem();const a=useMergeRefs([i,n,s.ref]);const f=c===l;const d={...r,...s,ref:a,tabIndex:f?0:-1,"data-active":f?"":void 0,onFocus(e){r.onFocus==null||r.onFocus(e);s.onFocus==null||s.onFocus(e);u(l)}};return renderJsx(o,d)}));function _extends(){_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};return _extends.apply(this,arguments)}let ne=false;let oe=0;const genId=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+oe++;function useFloatingId(){const[t,n]=e.useState((()=>ne?genId():void 0));Y((()=>{t==null&&n(genId())}),[]);e.useEffect((()=>{ne=true}),[]);return t}const re=W.useId;const se=re||useFloatingId;let ce;process.env.NODE_ENV!=="production"&&(ce=new Set);function warn(){var e;for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];const r="Floating UI: "+n.join(" ");if(!((e=ce)!=null&&e.has(r))){var s;(s=ce)==null||s.add(r);console.warn(r)}}function error(){var e;for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];const r="Floating UI: "+n.join(" ");if(!((e=ce)!=null&&e.has(r))){var s;(s=ce)==null||s.add(r);console.error(r)}}const ue=e.forwardRef((function FloatingArrow(t,n){const{context:{placement:o,elements:{floating:r},middlewareData:{arrow:s,shift:c}},width:u=14,height:i=7,tipRadius:l=0,strokeWidth:a=0,staticOffset:f,stroke:d,d:v,style:{transform:m,...g}={},...p}=t;process.env.NODE_ENV!=="production"&&(n||warn("The `ref` prop is required for `FloatingArrow`."));const h=se();const[b,y]=e.useState(false);Y((()=>{if(!r)return;const e=M(r).direction==="rtl";e&&y(true)}),[r]);if(!r)return null;const[E,x]=o.split("-");const w=E==="top"||E==="bottom";let R=f;(w&&c!=null&&c.x||!w&&c!=null&&c.y)&&(R=null);const I=a*2;const C=I/2;const O=u/2*(l/-8+1);const k=i/2*l/4;const T=!!v;const D=R&&x==="end"?"bottom":"top";let F=R&&x==="end"?"right":"left";R&&b&&(F=x==="end"?"left":"right");const L=(s==null?void 0:s.x)!=null?R||s.x:"";const P=(s==null?void 0:s.y)!=null?R||s.y:"";const S=v||"M0,0 H"+u+" L"+(u-O)+","+(i-k)+" Q"+u/2+","+i+" "+O+","+(i-k)+" Z";const N={top:T?"rotate(180deg)":"",left:T?"rotate(90deg)":"rotate(-90deg)",bottom:T?"":"rotate(180deg)",right:T?"rotate(-90deg)":"rotate(90deg)"}[E];return e.createElement("svg",_extends({},p,{"aria-hidden":true,ref:n,width:T?u:u+I,height:u,viewBox:"0 0 "+u+" "+(i>u?i:u),style:{position:"absolute",pointerEvents:"none",[F]:L,[D]:P,[E]:w||T?"100%":"calc(100% - "+I/2+"px)",transform:[N,m].filter((e=>!!e)).join(" "),...g}}),I>0&&e.createElement("path",{clipPath:"url(#"+h+")",fill:"none",stroke:d,strokeWidth:I+(v?0:1),d:S}),e.createElement("path",{stroke:I&&!v?p.fill:"none",d:S}),e.createElement("clipPath",{id:h},e.createElement("rect",{x:-C,y:C*(T?-1:1),width:u+I,height:u})))}));function createPubSub(){const e=new Map;return{emit(t,n){var o;(o=e.get(t))==null||o.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var o;e.set(t,((o=e.get(t))==null?void 0:o.filter((e=>e!==n)))||[])}}}const ie=e.createContext(null);const le=e.createContext(null);const useFloatingParentNodeId=()=>{var t;return((t=e.useContext(ie))==null?void 0:t.id)||null};const useFloatingTree=()=>e.useContext(le);function useFloatingNodeId(e){const t=se();const n=useFloatingTree();const o=useFloatingParentNodeId();const r=e||o;Y((()=>{const e={id:t,parentId:r};n==null||n.addNode(e);return()=>{n==null||n.removeNode(e)}}),[n,t,r]);return t}function FloatingNode(t){const{children:n,id:o}=t;const r=useFloatingParentNodeId();return e.createElement(ie.Provider,{value:e.useMemo((()=>({id:o,parentId:r})),[o,r])},n)}function FloatingTree(t){const{children:n}=t;const o=e.useRef([]);const r=e.useCallback((e=>{o.current=[...o.current,e]}),[]);const s=e.useCallback((e=>{o.current=o.current.filter((t=>t!==e))}),[]);const c=e.useState((()=>createPubSub()))[0];return e.createElement(le.Provider,{value:e.useMemo((()=>({nodesRef:o,addNode:r,removeNode:s,events:c})),[r,s,c])},n)}function createAttribute(e){return"data-floating-ui-"+e}function useLatestRef(e){const t=o(e);Y((()=>{t.current=e}));return t}const ae=createAttribute("safe-polygon");function getDelay(e,t,n){return n&&!s(n)?0:typeof e==="number"?e:e==null?void 0:e[t]}function useHover(t,n){n===void 0&&(n={});const{open:o,onOpenChange:r,dataRef:i,events:l,elements:a}=t;const{enabled:f=true,delay:d=0,handleClose:v=null,mouseOnly:m=false,restMs:g=0,move:p=true}=n;const h=useFloatingTree();const b=useFloatingParentNodeId();const y=useLatestRef(v);const E=useLatestRef(d);const x=useLatestRef(o);const w=e.useRef();const R=e.useRef(-1);const I=e.useRef();const M=e.useRef(-1);const O=e.useRef(true);const k=e.useRef(false);const T=e.useRef((()=>{}));const D=e.useRef(false);const F=e.useCallback((()=>{var e;const t=(e=i.current.openEvent)==null?void 0:e.type;return(t==null?void 0:t.includes("mouse"))&&t!=="mousedown"}),[i]);e.useEffect((()=>{if(f){l.on("openchange",onOpenChange);return()=>{l.off("openchange",onOpenChange)}}function onOpenChange(e){let{open:t}=e;if(!t){clearTimeout(R.current);clearTimeout(M.current);O.current=true;D.current=false}}}),[f,l]);e.useEffect((()=>{if(!f)return;if(!y.current)return;if(!o)return;function onLeave(e){F()&&r(false,e,"hover")}const e=c(a.floating).documentElement;e.addEventListener("mouseleave",onLeave);return()=>{e.removeEventListener("mouseleave",onLeave)}}),[a.floating,o,r,f,y,F]);const L=e.useCallback((function(e,t,n){t===void 0&&(t=true);n===void 0&&(n="hover");const o=getDelay(E.current,"close",w.current);if(o&&!I.current){clearTimeout(R.current);R.current=window.setTimeout((()=>r(false,e,n)),o)}else if(t){clearTimeout(R.current);r(false,e,n)}}),[E,r]);const P=useEffectEvent((()=>{T.current();I.current=void 0}));const S=useEffectEvent((()=>{if(k.current){const e=c(a.floating).body;e.style.pointerEvents="";e.removeAttribute(ae);k.current=false}}));e.useEffect((()=>{if(f&&C(a.domReference)){var e;const t=a.domReference;o&&t.addEventListener("mouseleave",onScrollMouseLeave);(e=a.floating)==null||e.addEventListener("mouseleave",onScrollMouseLeave);p&&t.addEventListener("mousemove",onMouseEnter,{once:true});t.addEventListener("mouseenter",onMouseEnter);t.addEventListener("mouseleave",onMouseLeave);return()=>{var e;o&&t.removeEventListener("mouseleave",onScrollMouseLeave);(e=a.floating)==null||e.removeEventListener("mouseleave",onScrollMouseLeave);p&&t.removeEventListener("mousemove",onMouseEnter);t.removeEventListener("mouseenter",onMouseEnter);t.removeEventListener("mouseleave",onMouseLeave)}}function isClickLikeOpenEvent(){return!!i.current.openEvent&&["click","mousedown"].includes(i.current.openEvent.type)}function onMouseEnter(e){clearTimeout(R.current);O.current=false;if(m&&!s(w.current)||g>0&&!getDelay(E.current,"open"))return;const t=getDelay(E.current,"open",w.current);t?R.current=window.setTimeout((()=>{x.current||r(true,e,"hover")}),t):r(true,e,"hover")}function onMouseLeave(e){if(isClickLikeOpenEvent())return;T.current();const t=c(a.floating);clearTimeout(M.current);D.current=false;if(y.current&&i.current.floatingContext){o||clearTimeout(R.current);I.current=y.current({...i.current.floatingContext,tree:h,x:e.clientX,y:e.clientY,onClose(){S();P();L(e,true,"safe-polygon")}});const n=I.current;t.addEventListener("mousemove",n);T.current=()=>{t.removeEventListener("mousemove",n)};return}const n=w.current!=="touch"||!u(a.floating,e.relatedTarget);n&&L(e)}function onScrollMouseLeave(e){isClickLikeOpenEvent()||i.current.floatingContext&&(y.current==null||y.current({...i.current.floatingContext,tree:h,x:e.clientX,y:e.clientY,onClose(){S();P();L(e)}})(e))}}),[a,f,t,m,g,p,L,P,S,r,o,x,h,E,y,i]);Y((()=>{var e;if(f&&o&&(e=y.current)!=null&&e.__options.blockPointerEvents&&F()){k.current=true;const e=a.floating;if(C(a.domReference)&&e){var t;const n=c(a.floating).body;n.setAttribute(ae,"");const o=a.domReference;const r=h==null||(t=h.nodesRef.current.find((e=>e.id===b)))==null||(t=t.context)==null?void 0:t.elements.floating;r&&(r.style.pointerEvents="");n.style.pointerEvents="none";o.style.pointerEvents="auto";e.style.pointerEvents="auto";return()=>{n.style.pointerEvents="";o.style.pointerEvents="";e.style.pointerEvents=""}}}}),[f,o,b,a,h,y,F]);Y((()=>{if(!o){w.current=void 0;D.current=false;P();S()}}),[o,P,S]);e.useEffect((()=>()=>{P();clearTimeout(R.current);clearTimeout(M.current);S()}),[f,a.domReference,P,S]);const N=e.useMemo((()=>{function setPointerRef(e){w.current=e.pointerType}return{onPointerDown:setPointerRef,onPointerEnter:setPointerRef,onMouseMove(e){const{nativeEvent:t}=e;function handleMouseMove(){O.current||x.current||r(true,t,"hover")}if((!m||s(w.current))&&!o&&g!==0&&!(D.current&&e.movementX**2+e.movementY**2<2)){clearTimeout(M.current);if(w.current==="touch")handleMouseMove();else{D.current=true;M.current=window.setTimeout(handleMouseMove,g)}}}}}),[m,r,o,x,g]);const A=e.useMemo((()=>({onMouseEnter(){clearTimeout(R.current)},onMouseLeave(e){L(e.nativeEvent,false)}})),[L]);return e.useMemo((()=>f?{reference:N,floating:A}:{}),[f,N,A])}const NOOP=()=>{};const fe=e.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:NOOP,setState:NOOP,isInstantPhase:false});
/**
 * @deprecated
 * Use the return value of `useDelayGroup()` instead.
 */const useDelayGroupContext=()=>e.useContext(fe);function FloatingDelayGroup(t){const{children:n,delay:o,timeoutMs:r=0}=t;const[s,c]=e.useReducer(((e,t)=>({...e,...t})),{delay:o,timeoutMs:r,initialDelay:o,currentId:null,isInstantPhase:false});const u=e.useRef(null);const i=e.useCallback((e=>{c({currentId:e})}),[]);Y((()=>{if(s.currentId)u.current===null?u.current=s.currentId:s.isInstantPhase||c({isInstantPhase:true});else{s.isInstantPhase&&c({isInstantPhase:false});u.current=null}}),[s.currentId,s.isInstantPhase]);return e.createElement(fe.Provider,{value:e.useMemo((()=>({...s,setState:c,setCurrentId:i})),[s,i])},n)}function useDelayGroup(e,t){t===void 0&&(t={});const{open:n,onOpenChange:o,floatingId:r}=e;const{id:s,enabled:c=true}=t;const u=s!=null?s:r;const i=useDelayGroupContext();const{currentId:l,setCurrentId:a,initialDelay:f,setState:d,timeoutMs:v}=i;Y((()=>{if(c&&l){d({delay:{open:1,close:getDelay(f,"close")}});l!==u&&o(false)}}),[c,u,o,d,l,f]);Y((()=>{function unset(){o(false);d({delay:f,currentId:null})}if(c&&l&&!n&&l===u){if(v){const e=window.setTimeout(unset,v);return()=>{clearTimeout(e)}}unset()}}),[c,n,d,l,u,o,f,v]);Y((()=>{c&&a!==NOOP&&n&&a(u)}),[c,n,a,u]);return i}function getAncestors(e,t){var n;let o=[];let r=(n=e.find((e=>e.id===t)))==null?void 0:n.parentId;while(r){const t=e.find((e=>e.id===r));r=t==null?void 0:t.parentId;t&&(o=o.concat(t))}return o}function getChildren(e,t){let n=e.filter((e=>{var n;return e.parentId===t&&((n=e.context)==null?void 0:n.open)}));let o=n;while(o.length){o=e.filter((e=>{var t;return(t=o)==null?void 0:t.some((t=>{var n;return e.parentId===t.id&&((n=e.context)==null?void 0:n.open)}))}));n=n.concat(o)}return n}function getDeepestNode(e,t){let n;let o=-1;function findDeepest(t,r){if(r>o){n=t;o=r}const s=getChildren(e,t);s.forEach((e=>{findDeepest(e.id,r+1)}))}findDeepest(t,0);return e.find((e=>e.id===n))}let de=new WeakMap;let ve=new WeakSet;let me={};let ge=0;const supportsInert=()=>typeof HTMLElement!=="undefined"&&"inert"in HTMLElement.prototype;const unwrapHost=e=>e&&(e.host||unwrapHost(e.parentNode));const correctElements=(e,t)=>t.map((t=>{if(e.contains(t))return t;const n=unwrapHost(t);return e.contains(n)?n:null})).filter((e=>e!=null));function applyAttributeToOthers(e,t,n,o){const r="data-floating-ui-inert";const s=o?"inert":n?"aria-hidden":null;const c=correctElements(t,e);const u=new Set;const i=new Set(c);const l=[];me[r]||(me[r]=new WeakMap);const a=me[r];c.forEach(keep);deep(t);u.clear();function keep(e){if(e&&!u.has(e)){u.add(e);e.parentNode&&keep(e.parentNode)}}function deep(e){e&&!i.has(e)&&[].forEach.call(e.children,(e=>{if(O(e)!=="script")if(u.has(e))deep(e);else{const t=s?e.getAttribute(s):null;const n=t!==null&&t!=="false";const o=(de.get(e)||0)+1;const c=(a.get(e)||0)+1;de.set(e,o);a.set(e,c);l.push(e);o===1&&n&&ve.add(e);c===1&&e.setAttribute(r,"");!n&&s&&e.setAttribute(s,"true")}}))}ge++;return()=>{l.forEach((e=>{const t=(de.get(e)||0)-1;const n=(a.get(e)||0)-1;de.set(e,t);a.set(e,n);if(!t){!ve.has(e)&&s&&e.removeAttribute(s);ve.delete(e)}n||e.removeAttribute(r)}));ge--;if(!ge){de=new WeakMap;de=new WeakMap;ve=new WeakSet;me={}}}}function markOthers(e,t,n){t===void 0&&(t=false);n===void 0&&(n=false);const o=c(e[0]).body;return applyAttributeToOthers(e.concat(Array.from(o.querySelectorAll("[aria-live]"))),o,t,n)}const getTabbableOptions=()=>({getShadowRoot:true,displayCheck:typeof ResizeObserver==="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function getTabbableIn(e,t){const n=P(e,getTabbableOptions());t==="prev"&&n.reverse();const o=n.indexOf(i(c(e)));const r=n.slice(o+1);return r[0]}function getNextTabbable(){return getTabbableIn(document.body,"next")}function getPreviousTabbable(){return getTabbableIn(document.body,"prev")}function isOutsideEvent(e,t){const n=t||e.currentTarget;const o=e.relatedTarget;return!o||!u(n,o)}function disableFocusInside(e){const t=P(e,getTabbableOptions());t.forEach((e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"";e.setAttribute("tabindex","-1")}))}function enableFocusInside(e){const t=e.querySelectorAll("[data-tabindex]");t.forEach((e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex;t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}))}const pe={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let he;function setActiveElementOnTab(e){if(e.key==="Tab"){e.target;clearTimeout(he)}}const be=e.forwardRef((function FocusGuard(t,n){const[o,r]=e.useState();Y((()=>{l()&&r("button");document.addEventListener("keydown",setActiveElementOnTab);return()=>{document.removeEventListener("keydown",setActiveElementOnTab)}}),[]);const s={ref:n,tabIndex:0,role:o,"aria-hidden":!o||void 0,[createAttribute("focus-guard")]:"",style:pe};return e.createElement("span",_extends({},t,s))}));const ye=e.createContext(null);const Ee=createAttribute("portal");function useFloatingPortalNode(t){t===void 0&&(t={});const{id:n,root:o}=t;const r=se();const s=usePortalContext();const[c,u]=e.useState(null);const i=e.useRef(null);Y((()=>()=>{c==null||c.remove();queueMicrotask((()=>{i.current=null}))}),[c]);Y((()=>{if(!r)return;if(i.current)return;const e=n?document.getElementById(n):null;if(!e)return;const t=document.createElement("div");t.id=r;t.setAttribute(Ee,"");e.appendChild(t);i.current=t;u(t)}),[n,r]);Y((()=>{if(!r)return;if(i.current)return;let e=o||(s==null?void 0:s.portalNode);e&&!C(e)&&(e=e.current);e=e||document.body;let t=null;if(n){t=document.createElement("div");t.id=n;e.appendChild(t)}const c=document.createElement("div");c.id=r;c.setAttribute(Ee,"");e=t||e;e.appendChild(c);i.current=c;u(c)}),[n,o,r,s]);return c}function FloatingPortal(t){const{children:n,id:o,root:r=null,preserveTabOrder:s=true}=t;const c=useFloatingPortalNode({id:o,root:r});const[u,i]=e.useState(null);const l=e.useRef(null);const a=e.useRef(null);const f=e.useRef(null);const d=e.useRef(null);const v=u==null?void 0:u.modal;const m=u==null?void 0:u.open;const g=!!u&&!u.modal&&u.open&&s&&!!(r||c);e.useEffect((()=>{if(c&&s&&!v){c.addEventListener("focusin",onFocus,true);c.addEventListener("focusout",onFocus,true);return()=>{c.removeEventListener("focusin",onFocus,true);c.removeEventListener("focusout",onFocus,true)}}function onFocus(e){if(c&&isOutsideEvent(e)){const t=e.type==="focusin";const n=t?enableFocusInside:disableFocusInside;n(c)}}}),[c,s,v]);e.useEffect((()=>{c&&(m||enableFocusInside(c))}),[m,c]);return e.createElement(ye.Provider,{value:e.useMemo((()=>({preserveTabOrder:s,beforeOutsideRef:l,afterOutsideRef:a,beforeInsideRef:f,afterInsideRef:d,portalNode:c,setFocusManagerState:i})),[s,c])},g&&c&&e.createElement(be,{"data-type":"outside",ref:l,onFocus:e=>{if(isOutsideEvent(e,c)){var t;(t=f.current)==null||t.focus()}else{const e=getPreviousTabbable()||(u==null?void 0:u.refs.domReference.current);e==null||e.focus()}}}),g&&c&&e.createElement("span",{"aria-owns":c.id,style:pe}),c&&N.createPortal(n,c),g&&c&&e.createElement(be,{"data-type":"outside",ref:a,onFocus:e=>{if(isOutsideEvent(e,c)){var t;(t=d.current)==null||t.focus()}else{const t=getNextTabbable()||(u==null?void 0:u.refs.domReference.current);t==null||t.focus();(u==null?void 0:u.closeOnFocusOut)&&(u==null?void 0:u.onOpenChange(false,e.nativeEvent,"focus-out"))}}}))}const usePortalContext=()=>e.useContext(ye);const xe="data-floating-ui-focusable";function getFloatingFocusElement(e){return e?e.hasAttribute(xe)?e:e.querySelector("["+xe+"]")||e:null}const we=20;let Re=[];function addPreviouslyFocusedElement(e){Re=Re.filter((e=>e.isConnected));let t=e;if(t&&O(t)!=="body"){if(!S(t,getTabbableOptions())){const e=P(t,getTabbableOptions())[0];e&&(t=e)}Re.push(t);Re.length>we&&(Re=Re.slice(-we))}}function getPreviouslyFocusedElement(){return Re.slice().reverse().find((e=>e.isConnected))}const Ie=e.forwardRef((function VisuallyHiddenDismiss(t,n){return e.createElement("button",_extends({},t,{type:"button",ref:n,tabIndex:-1,style:pe}))}));function FloatingFocusManager(t){const{context:n,children:o,disabled:s=false,order:l=["content"],guards:m=true,initialFocus:g=0,returnFocus:p=true,restoreFocus:h=false,modal:b=true,visuallyHiddenDismiss:y=false,closeOnFocusOut:E=true}=t;const{open:x,refs:w,nodeId:R,onOpenChange:I,events:M,dataRef:C,floatingId:O,elements:{domReference:T,floating:D}}=n;const F=typeof g==="number"&&g<0;const L=a(T)&&F;const S=!supportsInert()||m;const N=useLatestRef(l);const A=useLatestRef(g);const K=useLatestRef(p);const B=useFloatingTree();const _=usePortalContext();const W=e.useRef(null);const q=e.useRef(null);const H=e.useRef(false);const V=e.useRef(false);const j=e.useRef(-1);const U=_!=null;const z=getFloatingFocusElement(D);const X=useEffectEvent((function(e){e===void 0&&(e=z);return e?P(e,getTabbableOptions()):[]}));const G=useEffectEvent((e=>{const t=X(e);return N.current.map((e=>T&&e==="reference"?T:z&&e==="floating"?z:t)).filter(Boolean).flat()}));e.useEffect((()=>{H.current=false}),[s]);e.useEffect((()=>{if(s)return;if(!b)return;function onKeyDown(e){if(e.key==="Tab"){u(z,i(c(z)))&&X().length===0&&!L&&r(e);const t=G();const n=f(e);if(N.current[0]==="reference"&&n===T){r(e);e.shiftKey?enqueueFocus(t[t.length-1]):enqueueFocus(t[1])}if(N.current[1]==="floating"&&n===z&&e.shiftKey){r(e);enqueueFocus(t[0])}}}const e=c(z);e.addEventListener("keydown",onKeyDown);return()=>{e.removeEventListener("keydown",onKeyDown)}}),[s,T,z,b,N,L,X,G]);e.useEffect((()=>{if(!s&&D){D.addEventListener("focusin",handleFocusIn);return()=>{D.removeEventListener("focusin",handleFocusIn)}}function handleFocusIn(e){const t=f(e);const n=X();const o=n.indexOf(t);o!==-1&&(j.current=o)}}),[s,D,X]);e.useEffect((()=>{if(!s&&E&&D&&k(T)){T.addEventListener("focusout",handleFocusOutside);T.addEventListener("pointerdown",handlePointerDown);D.addEventListener("focusout",handleFocusOutside);return()=>{T.removeEventListener("focusout",handleFocusOutside);T.removeEventListener("pointerdown",handlePointerDown);D.removeEventListener("focusout",handleFocusOutside)}}function handlePointerDown(){V.current=true;setTimeout((()=>{V.current=false}))}function handleFocusOutside(e){const t=e.relatedTarget;queueMicrotask((()=>{const n=!(u(T,t)||u(D,t)||u(t,D)||u(_==null?void 0:_.portalNode,t)||t!=null&&t.hasAttribute(createAttribute("focus-guard"))||B&&(getChildren(B.nodesRef.current,R).find((e=>{var n,o;return u((n=e.context)==null?void 0:n.elements.floating,t)||u((o=e.context)==null?void 0:o.elements.domReference,t)}))||getAncestors(B.nodesRef.current,R).find((e=>{var n,o;return((n=e.context)==null?void 0:n.elements.floating)===t||((o=e.context)==null?void 0:o.elements.domReference)===t}))));if(h&&n&&i(c(z))===c(z).body){k(z)&&z.focus();const e=j.current;const t=X();const n=t[e]||t[t.length-1]||z;k(n)&&n.focus()}if((!!L||!b)&&t&&n&&!V.current&&t!==getPreviouslyFocusedElement()){H.current=true;I(false,e,"focus-out")}}))}}),[s,T,D,z,b,R,B,_,I,E,h,X,L]);e.useEffect((()=>{var e;if(s)return;const t=Array.from((_==null||(e=_.portalNode)==null?void 0:e.querySelectorAll("["+createAttribute("portal")+"]"))||[]);if(D){const e=[D,...t,W.current,q.current,N.current.includes("reference")||L?T:null].filter((e=>e!=null));const n=b||L?markOthers(e,S,!S):markOthers(e);return()=>{n()}}}),[s,T,D,b,N,_,L,S]);Y((()=>{if(s||!k(z))return;const e=c(z);const t=i(e);queueMicrotask((()=>{const e=G(z);const n=A.current;const o=(typeof n==="number"?e[n]:n.current)||z;const r=u(z,t);F||r||!x||enqueueFocus(o,{preventScroll:o===z})}))}),[s,x,z,F,G,A]);Y((()=>{if(s||!z)return;let e=false;const t=c(z);const n=i(t);const o=C.current;let r=o.openEvent;addPreviouslyFocusedElement(n);function onOpenChange(t){let{open:n,reason:o,event:s,nested:c}=t;n&&(r=s);o==="escape-key"&&w.domReference.current&&addPreviouslyFocusedElement(w.domReference.current);o==="hover"&&s.type==="mouseleave"&&(H.current=true);if(o==="outside-press")if(c){H.current=false;e=true}else H.current=!(d(s)||v(s))}M.on("openchange",onOpenChange);const l=t.createElement("span");l.setAttribute("tabindex","-1");l.setAttribute("aria-hidden","true");Object.assign(l.style,pe);U&&T&&T.insertAdjacentElement("afterend",l);return()=>{M.off("openchange",onOpenChange);const n=i(t);const o=u(D,n)||B&&getChildren(B.nodesRef.current,R).some((e=>{var t;return u((t=e.context)==null?void 0:t.elements.floating,n)}));const s=o||r&&["click","mousedown"].includes(r.type);s&&w.domReference.current&&addPreviouslyFocusedElement(w.domReference.current);const c=getPreviouslyFocusedElement()||l;queueMicrotask((()=>{K.current&&!H.current&&k(c)&&(c===n||n===t.body||o)&&c.focus({preventScroll:e});l.remove()}))}}),[s,D,z,K,C,w,M,B,R,U,T]);Y((()=>{if(!s&&_){_.setFocusManagerState({modal:b,closeOnFocusOut:E,open:x,onOpenChange:I,refs:w});return()=>{_.setFocusManagerState(null)}}}),[s,_,b,x,I,w,E]);Y((()=>{if(s)return;if(!z)return;if(typeof MutationObserver!=="function")return;if(F)return;const handleMutation=()=>{const e=z.getAttribute("tabindex");const t=X();const n=i(c(D));const o=t.indexOf(n);o!==-1&&(j.current=o);N.current.includes("floating")||n!==w.domReference.current&&t.length===0?e!=="0"&&z.setAttribute("tabindex","0"):e!=="-1"&&z.setAttribute("tabindex","-1")};handleMutation();const e=new MutationObserver(handleMutation);e.observe(z,{childList:true,subtree:true,attributes:true});return()=>{e.disconnect()}}),[s,D,z,w,N,X,F]);function renderDismissButton(t){return!s&&y&&b?e.createElement(Ie,{ref:t==="start"?W:q,onClick:e=>I(false,e.nativeEvent)},typeof y==="string"?y:"Dismiss"):null}const J=!s&&S&&(!b||!L)&&(U||b);return e.createElement(e.Fragment,null,J&&e.createElement(be,{"data-type":"inside",ref:_==null?void 0:_.beforeInsideRef,onFocus:e=>{if(b){const e=G();enqueueFocus(l[0]==="reference"?e[0]:e[e.length-1])}else if(_!=null&&_.preserveTabOrder&&_.portalNode){H.current=false;if(isOutsideEvent(e,_.portalNode)){const e=getNextTabbable()||T;e==null||e.focus()}else{var t;(t=_.beforeOutsideRef.current)==null||t.focus()}}}}),!L&&renderDismissButton("start"),o,renderDismissButton("end"),J&&e.createElement(be,{"data-type":"inside",ref:_==null?void 0:_.afterInsideRef,onFocus:e=>{if(b)enqueueFocus(G()[0]);else if(_!=null&&_.preserveTabOrder&&_.portalNode){E&&(H.current=true);if(isOutsideEvent(e,_.portalNode)){const e=getPreviousTabbable()||T;e==null||e.focus()}else{var t;(t=_.afterOutsideRef.current)==null||t.focus()}}}}))}let Me=0;function enableScrollLock(){const e=/iP(hone|ad|od)|iOS/.test(m());const t=document.body.style;const n=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft;const o=n?"paddingLeft":"paddingRight";const r=window.innerWidth-document.documentElement.clientWidth;const s=t.left?parseFloat(t.left):window.scrollX;const c=t.top?parseFloat(t.top):window.scrollY;t.overflow="hidden";r&&(t[o]=r+"px");if(e){var u,i;const e=((u=window.visualViewport)==null?void 0:u.offsetLeft)||0;const n=((i=window.visualViewport)==null?void 0:i.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(c-Math.floor(n))+"px",left:-(s-Math.floor(e))+"px",right:"0"})}return()=>{Object.assign(t,{overflow:"",[o]:""});if(e){Object.assign(t,{position:"",top:"",left:"",right:""});window.scrollTo(s,c)}}}let cleanup=()=>{};const Ce=e.forwardRef((function FloatingOverlay(t,n){const{lockScroll:o=false,...r}=t;Y((()=>{if(o){Me++;Me===1&&(cleanup=enableScrollLock());return()=>{Me--;Me===0&&cleanup()}}}),[o]);return e.createElement("div",_extends({ref:n},r,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...r.style}}))}));function isButtonTarget(e){return k(e.target)&&e.target.tagName==="BUTTON"}function isSpaceIgnored(e){return g(e)}function useClick(t,n){n===void 0&&(n={});const{open:o,onOpenChange:r,dataRef:c,elements:{domReference:u}}=t;const{enabled:i=true,event:l="click",toggle:a=true,ignoreMouse:f=false,keyboardHandlers:d=true}=n;const v=e.useRef();const m=e.useRef(false);const g=e.useMemo((()=>({onPointerDown(e){v.current=e.pointerType},onMouseDown(e){const t=v.current;if(e.button===0&&l!=="click"&&(!s(t,true)||!f))if(!o||!a||c.current.openEvent&&c.current.openEvent.type!=="mousedown"){e.preventDefault();r(true,e.nativeEvent,"click")}else r(false,e.nativeEvent,"click")},onClick(e){const t=v.current;l==="mousedown"&&v.current?v.current=void 0:s(t,true)&&f||(!o||!a||c.current.openEvent&&c.current.openEvent.type!=="click"?r(true,e.nativeEvent,"click"):r(false,e.nativeEvent,"click"))},onKeyDown(e){v.current=void 0;if(!e.defaultPrevented&&d&&!isButtonTarget(e)){if(e.key===" "&&!isSpaceIgnored(u)){e.preventDefault();m.current=true}e.key==="Enter"&&r(!o||!a,e.nativeEvent,"click")}},onKeyUp(e){if(!e.defaultPrevented&&d&&!isButtonTarget(e)&&!isSpaceIgnored(u)&&e.key===" "&&m.current){m.current=false;r(!o||!a,e.nativeEvent,"click")}}})),[c,u,l,f,d,r,o,a]);return e.useMemo((()=>i?{reference:g}:{}),[i,g])}function createVirtualElement(e,t){let n=null;let o=null;let r=false;return{contextElement:e||void 0,getBoundingClientRect(){var s;const c=(e==null?void 0:e.getBoundingClientRect())||{width:0,height:0,x:0,y:0};const u=t.axis==="x"||t.axis==="both";const i=t.axis==="y"||t.axis==="both";const l=["mouseenter","mousemove"].includes(((s=t.dataRef.current.openEvent)==null?void 0:s.type)||"")&&t.pointerType!=="touch";let a=c.width;let f=c.height;let d=c.x;let v=c.y;n==null&&t.x&&u&&(n=c.x-t.x);o==null&&t.y&&i&&(o=c.y-t.y);d-=n||0;v-=o||0;a=0;f=0;if(!r||l){a=t.axis==="y"?c.width:0;f=t.axis==="x"?c.height:0;d=u&&t.x!=null?t.x:d;v=i&&t.y!=null?t.y:v}else if(r&&!l){f=t.axis==="x"?c.height:f;a=t.axis==="y"?c.width:a}r=true;return{width:a,height:f,x:d,y:v,top:v,right:d+a,bottom:v+f,left:d}}}}function isMouseBasedEvent(e){return e!=null&&e.clientX!=null}function useClientPoint(t,n){n===void 0&&(n={});const{open:o,dataRef:r,elements:{floating:c,domReference:i},refs:l}=t;const{enabled:a=true,axis:d="both",x:v=null,y:m=null}=n;const g=e.useRef(false);const p=e.useRef(null);const[h,b]=e.useState();const[y,E]=e.useState([]);const x=useEffectEvent(((e,t)=>{g.current||r.current.openEvent&&!isMouseBasedEvent(r.current.openEvent)||l.setPositionReference(createVirtualElement(i,{x:e,y:t,axis:d,dataRef:r,pointerType:h}))}));const w=useEffectEvent((e=>{v==null&&m==null&&(o?p.current||E([]):x(e.clientX,e.clientY))}));const R=s(h)?c:o;const I=e.useCallback((()=>{if(!R||!a||v!=null||m!=null)return;const e=T(c);function handleMouseMove(t){const n=f(t);if(u(c,n)){e.removeEventListener("mousemove",handleMouseMove);p.current=null}else x(t.clientX,t.clientY)}if(!r.current.openEvent||isMouseBasedEvent(r.current.openEvent)){e.addEventListener("mousemove",handleMouseMove);const cleanup=()=>{e.removeEventListener("mousemove",handleMouseMove);p.current=null};p.current=cleanup;return cleanup}l.setPositionReference(i)}),[R,a,v,m,c,r,l,i,x]);e.useEffect((()=>I()),[I,y]);e.useEffect((()=>{a&&!c&&(g.current=false)}),[a,c]);e.useEffect((()=>{!a&&o&&(g.current=true)}),[a,o]);Y((()=>{if(a&&(v!=null||m!=null)){g.current=false;x(v,m)}}),[a,v,m,x]);const M=e.useMemo((()=>{function setPointerTypeRef(e){let{pointerType:t}=e;b(t)}return{onPointerDown:setPointerTypeRef,onPointerEnter:setPointerTypeRef,onMouseMove:w,onMouseEnter:w}}),[w]);return e.useMemo((()=>a?{reference:M}:{}),[a,M])}const Oe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"};const ke={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"};const normalizeProp=e=>{var t,n;return{escapeKey:typeof e==="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null&&t,outsidePress:typeof e==="boolean"?e:(n=e==null?void 0:e.outsidePress)==null||n}};function useDismiss(t,n){n===void 0&&(n={});const{open:o,onOpenChange:r,elements:s,dataRef:i}=t;const{enabled:l=true,escapeKey:a=true,outsidePress:d=true,outsidePressEvent:v="pointerdown",referencePress:m=false,referencePressEvent:g="pointerdown",ancestorScroll:y=false,bubbles:E,capture:x}=n;const w=useFloatingTree();const R=useEffectEvent(typeof d==="function"?d:()=>false);const I=typeof d==="function"?R:d;const O=e.useRef(false);const T=e.useRef(false);const{escapeKey:P,outsidePress:S}=normalizeProp(E);const{escapeKey:N,outsidePress:K}=normalizeProp(x);const B=e.useRef(false);const _=useEffectEvent((e=>{var t;if(!o||!l||!a||e.key!=="Escape")return;if(B.current)return;const n=(t=i.current.floatingContext)==null?void 0:t.nodeId;const s=w?getChildren(w.nodesRef.current,n):[];if(!P){e.stopPropagation();if(s.length>0){let e=true;s.forEach((t=>{var n;(n=t.context)==null||!n.open||t.context.dataRef.current.__escapeKeyBubbles||(e=false)}));if(!e)return}}r(false,p(e)?e.nativeEvent:e,"escape-key")}));const W=useEffectEvent((e=>{var t;const callback=()=>{var t;_(e);(t=f(e))==null||t.removeEventListener("keydown",callback)};(t=f(e))==null||t.addEventListener("keydown",callback)}));const q=useEffectEvent((e=>{var t;const n=O.current;O.current=false;const o=T.current;T.current=false;if(v==="click"&&o)return;if(n)return;if(typeof I==="function"&&!I(e))return;const l=f(e);const a="["+createAttribute("inert")+"]";const d=c(s.floating).querySelectorAll(a);let m=C(l)?l:null;while(m&&!D(m)){const e=F(m);if(D(e)||!C(e))break;m=e}if(d.length&&C(l)&&!h(l)&&!u(l,s.floating)&&Array.from(d).every((e=>!u(m,e))))return;if(k(l)&&j){const t=l.clientWidth>0&&l.scrollWidth>l.clientWidth;const n=l.clientHeight>0&&l.scrollHeight>l.clientHeight;let o=n&&e.offsetX>l.clientWidth;if(n){const t=M(l).direction==="rtl";t&&(o=e.offsetX<=l.offsetWidth-l.clientWidth)}if(o||t&&e.offsetY>l.clientHeight)return}const g=(t=i.current.floatingContext)==null?void 0:t.nodeId;const p=w&&getChildren(w.nodesRef.current,g).some((t=>{var n;return b(e,(n=t.context)==null?void 0:n.elements.floating)}));if(b(e,s.floating)||b(e,s.domReference)||p)return;const y=w?getChildren(w.nodesRef.current,g):[];if(y.length>0){let e=true;y.forEach((t=>{var n;(n=t.context)==null||!n.open||t.context.dataRef.current.__outsidePressBubbles||(e=false)}));if(!e)return}r(false,e,"outside-press")}));const H=useEffectEvent((e=>{var t;const callback=()=>{var t;q(e);(t=f(e))==null||t.removeEventListener(v,callback)};(t=f(e))==null||t.addEventListener(v,callback)}));e.useEffect((()=>{if(!o||!l)return;i.current.__escapeKeyBubbles=P;i.current.__outsidePressBubbles=S;let e=-1;function onScroll(e){r(false,e,"ancestor-scroll")}function handleCompositionStart(){window.clearTimeout(e);B.current=true}function handleCompositionEnd(){e=window.setTimeout((()=>{B.current=false}),L()?5:0)}const t=c(s.floating);if(a){t.addEventListener("keydown",N?W:_,N);t.addEventListener("compositionstart",handleCompositionStart);t.addEventListener("compositionend",handleCompositionEnd)}I&&t.addEventListener(v,K?H:q,K);let n=[];if(y){C(s.domReference)&&(n=A(s.domReference));C(s.floating)&&(n=n.concat(A(s.floating)));!C(s.reference)&&s.reference&&s.reference.contextElement&&(n=n.concat(A(s.reference.contextElement)))}n=n.filter((e=>{var n;return e!==((n=t.defaultView)==null?void 0:n.visualViewport)}));n.forEach((e=>{e.addEventListener("scroll",onScroll,{passive:true})}));return()=>{if(a){t.removeEventListener("keydown",N?W:_,N);t.removeEventListener("compositionstart",handleCompositionStart);t.removeEventListener("compositionend",handleCompositionEnd)}I&&t.removeEventListener(v,K?H:q,K);n.forEach((e=>{e.removeEventListener("scroll",onScroll)}));window.clearTimeout(e)}}),[i,s,a,I,v,o,r,y,l,P,S,_,N,W,q,K,H]);e.useEffect((()=>{O.current=false}),[I,v]);const V=e.useMemo((()=>({onKeyDown:_,[Oe[g]]:e=>{m&&r(false,e.nativeEvent,"reference-press")}})),[_,r,m,g]);const j=e.useMemo((()=>({onKeyDown:_,onMouseDown(){T.current=true},onMouseUp(){T.current=true},[ke[v]]:()=>{O.current=true}})),[_,v]);return e.useMemo((()=>l?{reference:V,floating:j}:{}),[l,V,j])}function useFloatingRootContext(t){const{open:n=false,onOpenChange:o,elements:r}=t;const s=se();const c=e.useRef({});const[u]=e.useState((()=>createPubSub()));const i=useFloatingParentNodeId()!=null;if(process.env.NODE_ENV!=="production"){const e=r.reference;e&&!C(e)&&error("Cannot pass a virtual element to the `elements.reference` option,","as it must be a real DOM element. Use `refs.setPositionReference()`","instead.")}const[l,a]=e.useState(r.reference);const f=useEffectEvent(((e,t,n)=>{c.current.openEvent=e?t:void 0;u.emit("openchange",{open:e,event:t,reason:n,nested:i});o==null||o(e,t,n)}));const d=e.useMemo((()=>({setPositionReference:a})),[]);const v=e.useMemo((()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference})),[l,r.reference,r.floating]);return e.useMemo((()=>({dataRef:c,open:n,onOpenChange:f,elements:v,events:u,floatingId:s,refs:d})),[n,f,v,u,s,d])}function useFloating(t){t===void 0&&(t={});const{nodeId:n}=t;const o=useFloatingRootContext({...t,elements:{reference:null,floating:null,...t.elements}});const r=t.rootContext||o;const s=r.elements;const[c,u]=e.useState(null);const[i,l]=e.useState(null);const a=s==null?void 0:s.reference;const f=a||c;const d=e.useRef(null);const v=useFloatingTree();Y((()=>{f&&(d.current=f)}),[f]);const m=K({...t,elements:{...s,...i&&{reference:i}}});const g=e.useCallback((e=>{const t=C(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;l(t);m.refs.setReference(t)}),[m.refs]);const p=e.useCallback((e=>{if(C(e)||e===null){d.current=e;u(e)}(C(m.refs.reference.current)||m.refs.reference.current===null||e!==null&&!C(e))&&m.refs.setReference(e)}),[m.refs]);const h=e.useMemo((()=>({...m.refs,setReference:p,setPositionReference:g,domReference:d})),[m.refs,p,g]);const b=e.useMemo((()=>({...m.elements,domReference:f})),[m.elements,f]);const y=e.useMemo((()=>({...m,...r,refs:h,elements:b,nodeId:n})),[m,h,b,n,r]);Y((()=>{r.dataRef.current.floatingContext=y;const e=v==null?void 0:v.nodesRef.current.find((e=>e.id===n));e&&(e.context=y)}));return e.useMemo((()=>({...m,context:y,refs:h,elements:b})),[m,h,b,y])}function useFocus(t,n){n===void 0&&(n={});const{open:o,onOpenChange:r,events:s,dataRef:a,elements:d}=t;const{enabled:m=true,visibleOnly:p=true}=n;const h=e.useRef(false);const b=e.useRef();const E=e.useRef(true);e.useEffect((()=>{if(!m)return;const e=T(d.domReference);function onBlur(){!o&&k(d.domReference)&&d.domReference===i(c(d.domReference))&&(h.current=true)}function onKeyDown(){E.current=true}e.addEventListener("blur",onBlur);e.addEventListener("keydown",onKeyDown,true);return()=>{e.removeEventListener("blur",onBlur);e.removeEventListener("keydown",onKeyDown,true)}}),[d.domReference,o,m]);e.useEffect((()=>{if(m){s.on("openchange",onOpenChange);return()=>{s.off("openchange",onOpenChange)}}function onOpenChange(e){let{reason:t}=e;t!=="reference-press"&&t!=="escape-key"||(h.current=true)}}),[s,m]);e.useEffect((()=>()=>{clearTimeout(b.current)}),[]);const x=e.useMemo((()=>({onPointerDown(e){v(e.nativeEvent)||(E.current=false)},onMouseLeave(){h.current=false},onFocus(e){if(h.current)return;const t=f(e.nativeEvent);if(p&&C(t))try{if(l()&&y())throw Error();if(!t.matches(":focus-visible"))return}catch(e){if(!E.current&&!g(t))return}r(true,e.nativeEvent,"focus")},onBlur(e){h.current=false;const t=e.relatedTarget;const n=e.nativeEvent;const o=C(t)&&t.hasAttribute(createAttribute("focus-guard"))&&t.getAttribute("data-type")==="outside";b.current=window.setTimeout((()=>{var e;const s=i(d.domReference?d.domReference.ownerDocument:document);(t||s!==d.domReference)&&(u((e=a.current.floatingContext)==null?void 0:e.refs.floating.current,s)||u(d.domReference,s)||o||r(false,n,"focus"))}))}})),[a,d.domReference,r,p]);return e.useMemo((()=>m?{reference:x}:{}),[m,x])}const Te="active";const De="selected";function mergeProps(e,t,n){const o=new Map;const r=n==="item";let s=e;if(r&&e){const{[Te]:t,[De]:n,...o}=e;s=o}return{...n==="floating"&&{tabIndex:-1,[xe]:""},...s,...t.map((t=>{const o=t?t[n]:null;return typeof o==="function"?e?o(e):null:o})).concat(e).reduce(((e,t)=>{if(!t)return e;Object.entries(t).forEach((t=>{let[n,s]=t;if(!r||![Te,De].includes(n))if(n.indexOf("on")===0){o.has(n)||o.set(n,[]);if(typeof s==="function"){var c;(c=o.get(n))==null||c.push(s);e[n]=function(){var e;for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(e=o.get(n))==null?void 0:e.map((e=>e(...r))).find((e=>e!==void 0))}}}else e[n]=s}));return e}),{})}}function useInteractions(t){t===void 0&&(t=[]);const n=t.map((e=>e==null?void 0:e.reference));const o=t.map((e=>e==null?void 0:e.floating));const r=t.map((e=>e==null?void 0:e.item));const s=e.useCallback((e=>mergeProps(e,t,"reference")),n);const c=e.useCallback((e=>mergeProps(e,t,"floating")),o);const u=e.useCallback((e=>mergeProps(e,t,"item")),r);return e.useMemo((()=>({getReferenceProps:s,getFloatingProps:c,getItemProps:u})),[s,c,u])}let Fe=false;function doSwitch(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function isMainOrientationKey(e,t){const n=e===V||e===j;const o=e===U||e===z;return doSwitch(t,n,o)}function isMainOrientationToEndKey(e,t,n){const o=e===j;const r=n?e===U:e===z;return doSwitch(t,o,r)||e==="Enter"||e===" "||e===""}function isCrossOrientationOpenKey(e,t,n){const o=n?e===U:e===z;const r=e===j;return doSwitch(t,o,r)}function isCrossOrientationCloseKey(e,t,n){const o=n?e===z:e===U;const r=e===V;return doSwitch(t,o,r)}function useListNavigation(t,n){const{open:o,onOpenChange:s,elements:f}=t;const{listRef:m,activeIndex:g,onNavigate:p=(()=>{}),enabled:h=true,selectedIndex:b=null,allowEscape:E=false,loop:x=false,nested:w=false,rtl:R=false,virtual:I=false,focusItemOnOpen:M="auto",focusItemOnHover:C=true,openOnArrowKeyDown:O=true,disabledIndices:T,orientation:D="vertical",cols:F=1,scrollItemIntoView:L=true,virtualItemRef:P,itemSizes:S,dense:N=false}=n;if(process.env.NODE_ENV!=="production"){if(E){x||warn("`useListNavigation` looping must be enabled to allow escaping.");I||warn("`useListNavigation` must be virtual to allow escaping.")}D==="vertical"&&F>1&&warn("In grid list navigation mode (`cols` > 1), the `orientation` should",'be either "horizontal" or "both".')}const A=getFloatingFocusElement(f.floating);const K=useLatestRef(A);const B=useFloatingParentNodeId();const _=useFloatingTree();const W=useEffectEvent(p);const q=e.useRef(M);const H=e.useRef(b!=null?b:-1);const V=e.useRef(null);const U=e.useRef(true);const X=e.useRef(W);const G=e.useRef(!!f.floating);const J=e.useRef(o);const Z=e.useRef(false);const Q=e.useRef(false);const $=useLatestRef(T);const ee=useLatestRef(o);const te=useLatestRef(L);const ne=useLatestRef(b);const[oe,re]=e.useState();const[se,ce]=e.useState();const ue=useEffectEvent((function(e,t,n){n===void 0&&(n=false);function runFocus(e){if(I){re(e.id);_==null||_.events.emit("virtualfocus",e);P&&(P.current=e)}else enqueueFocus(e,{preventScroll:true,sync:!(!y()||!l())&&(Fe||Z.current)})}const o=e.current[t.current];o&&runFocus(o);requestAnimationFrame((()=>{const r=e.current[t.current]||o;if(!r)return;o||runFocus(r);const s=te.current;const c=s&&le&&(n||!U.current);c&&(r.scrollIntoView==null||r.scrollIntoView(typeof s==="boolean"?{block:"nearest",inline:"nearest"}:s))}))}));Y((()=>{document.createElement("div").focus({get preventScroll(){Fe=true;return false}})}),[]);Y((()=>{if(h)if(o&&f.floating){if(q.current&&b!=null){Q.current=true;H.current=b;W(b)}}else if(G.current){H.current=-1;X.current(null)}}),[h,o,f.floating,b,W]);Y((()=>{if(h&&o&&f.floating)if(g==null){Z.current=false;if(ne.current!=null)return;if(G.current){H.current=-1;ue(m,H)}if((!J.current||!G.current)&&q.current&&(V.current!=null||q.current===true&&V.current==null)){let e=0;const waitForListPopulated=()=>{if(m.current[0]==null){if(e<2){const t=e?requestAnimationFrame:queueMicrotask;t(waitForListPopulated)}e++}else{H.current=V.current==null||isMainOrientationToEndKey(V.current,D,R)||w?getMinIndex(m,$.current):getMaxIndex(m,$.current);V.current=null;W(H.current)}};waitForListPopulated()}}else if(!isIndexOutOfBounds(m,g)){H.current=g;ue(m,H,Q.current);Q.current=false}}),[h,o,f.floating,g,ne,w,m,D,R,W,ue,$]);Y((()=>{var e;if(!h||f.floating||!_||I||!G.current)return;const t=_.nodesRef.current;const n=(e=t.find((e=>e.id===B)))==null||(e=e.context)==null?void 0:e.elements.floating;const o=i(c(f.floating));const r=t.some((e=>e.context&&u(e.context.elements.floating,o)));n&&!r&&U.current&&n.focus({preventScroll:true})}),[h,f.floating,_,B,I]);Y((()=>{if(h&&_&&I&&!B){_.events.on("virtualfocus",handleVirtualFocus);return()=>{_.events.off("virtualfocus",handleVirtualFocus)}}function handleVirtualFocus(e){ce(e.id);P&&(P.current=e)}}),[h,_,I,B,P]);Y((()=>{X.current=W;G.current=!!f.floating}));Y((()=>{o||(V.current=null)}),[o]);Y((()=>{J.current=o}),[o]);const ie=g!=null;const le=e.useMemo((()=>{function syncCurrentTarget(e){if(!o)return;const t=m.current.indexOf(e);t!==-1&&W(t)}const e={onFocus(e){let{currentTarget:t}=e;syncCurrentTarget(t)},onClick:e=>{let{currentTarget:t}=e;return t.focus({preventScroll:true})},...C&&{onMouseMove(e){let{currentTarget:t}=e;syncCurrentTarget(t)},onPointerLeave(e){let{pointerType:t}=e;if(U.current&&t!=="touch"){H.current=-1;ue(m,H);W(null);I||enqueueFocus(K.current,{preventScroll:true})}}}};return e}),[o,K,ue,C,m,W,I]);const ae=useEffectEvent((e=>{U.current=false;Z.current=true;if(e.which===229)return;if(!ee.current&&e.currentTarget===K.current)return;if(w&&isCrossOrientationCloseKey(e.key,D,R)){r(e);s(false,e.nativeEvent,"list-navigation");k(f.domReference)&&!I&&f.domReference.focus();return}const t=H.current;const n=getMinIndex(m,T);const c=getMaxIndex(m,T);if(e.key==="Home"){r(e);H.current=n;W(H.current)}if(e.key==="End"){r(e);H.current=c;W(H.current)}if(F>1){const t=S||Array.from({length:m.current.length},(()=>({width:1,height:1})));const o=buildCellMap(t,F,N);const r=o.findIndex((e=>e!=null&&!isDisabled(m.current,e,T)));const s=o.reduce(((e,t,n)=>t==null||isDisabled(m.current,t,T)?e:n),-1);const u=o[getGridNavigatedIndex({current:o.map((e=>e!=null?m.current[e]:null))},{event:e,orientation:D,loop:x,cols:F,disabledIndices:getCellIndices([...T||m.current.map(((e,t)=>isDisabled(m.current,t)?t:void 0)),void 0],o),minIndex:r,maxIndex:s,prevIndex:getCellIndexOfCorner(H.current>c?n:H.current,t,o,F,e.key===j?"bl":e.key===z?"tr":"tl"),stopEvent:true})];if(u!=null){H.current=u;W(H.current)}if(D==="both")return}if(isMainOrientationKey(e.key,D)){r(e);if(o&&!I&&i(e.currentTarget.ownerDocument)===e.currentTarget){H.current=isMainOrientationToEndKey(e.key,D,R)?n:c;W(H.current);return}isMainOrientationToEndKey(e.key,D,R)?H.current=x?t>=c?E&&t!==m.current.length?-1:n:findNonDisabledIndex(m,{startingIndex:t,disabledIndices:T}):Math.min(c,findNonDisabledIndex(m,{startingIndex:t,disabledIndices:T})):H.current=x?t<=n?E&&t!==-1?m.current.length:c:findNonDisabledIndex(m,{startingIndex:t,decrement:true,disabledIndices:T}):Math.max(n,findNonDisabledIndex(m,{startingIndex:t,decrement:true,disabledIndices:T}));isIndexOutOfBounds(m,H.current)?W(null):W(H.current)}}));const fe=e.useMemo((()=>I&&o&&ie&&{"aria-activedescendant":se||oe}),[I,o,ie,se,oe]);const de=e.useMemo((()=>({"aria-orientation":D==="both"?void 0:D,...!a(f.domReference)&&fe,onKeyDown:ae,onPointerMove(){U.current=true}})),[fe,ae,f.domReference,D]);const ve=e.useMemo((()=>{function checkVirtualMouse(e){M==="auto"&&d(e.nativeEvent)&&(q.current=true)}function checkVirtualPointer(e){q.current=M;M==="auto"&&v(e.nativeEvent)&&(q.current=true)}return{...fe,onKeyDown(e){U.current=false;const t=e.key.startsWith("Arrow");const n=["Home","End"].includes(e.key);const c=t||n;const u=isCrossOrientationOpenKey(e.key,D,R);const i=isCrossOrientationCloseKey(e.key,D,R);const l=isMainOrientationKey(e.key,D);const a=(w?u:l)||e.key==="Enter"||e.key.trim()==="";if(I&&o){const t=_==null?void 0:_.nodesRef.current.find((e=>e.parentId==null));const o=_&&t?getDeepestNode(_.nodesRef.current,t.id):null;if(c&&o&&P){const t=new KeyboardEvent("keydown",{key:e.key,bubbles:true});if(u||i){var f,d;const n=((f=o.context)==null?void 0:f.elements.domReference)===e.currentTarget;const s=i&&!n?(d=o.context)==null?void 0:d.elements.domReference:u?m.current.find((e=>(e==null?void 0:e.id)===oe)):null;if(s){r(e);s.dispatchEvent(t);ce(void 0)}}if((l||n)&&o.context&&o.context.open&&o.parentId&&e.currentTarget!==o.context.elements.domReference){var v;r(e);(v=o.context.elements.domReference)==null||v.dispatchEvent(t);return}}return ae(e)}if(o||O||!t){a&&(V.current=w&&l?null:e.key);if(w){if(u){r(e);if(o){H.current=getMinIndex(m,$.current);W(H.current)}else s(true,e.nativeEvent,"list-navigation")}}else if(l){b!=null&&(H.current=b);r(e);!o&&O?s(true,e.nativeEvent,"list-navigation"):ae(e);o&&W(H.current)}}},onFocus(){o&&!I&&W(null)},onPointerDown:checkVirtualPointer,onMouseDown:checkVirtualMouse,onClick:checkVirtualMouse}}),[oe,fe,ae,$,M,m,w,W,s,o,O,D,R,b,_,I,P]);return e.useMemo((()=>h?{reference:ve,floating:de,item:le}:{}),[h,ve,de,le])}const Le=new Map([["select","listbox"],["combobox","listbox"],["label",false]]);function useRole(t,n){var o;n===void 0&&(n={});const{open:r,floatingId:s}=t;const{enabled:c=true,role:u="dialog"}=n;const i=(o=Le.get(u))!=null?o:u;const l=se();const a=useFloatingParentNodeId();const f=a!=null;const d=e.useMemo((()=>i==="tooltip"||u==="label"?{["aria-"+(u==="label"?"labelledby":"describedby")]:r?s:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":r?s:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:l},...i==="menu"&&f&&{role:"menuitem"},...u==="select"&&{"aria-autocomplete":"none"},...u==="combobox"&&{"aria-autocomplete":"list"}}),[i,s,f,r,l,u]);const v=e.useMemo((()=>{const e={id:s,...i&&{role:i}};return i==="tooltip"||u==="label"?e:{...e,...i==="menu"&&{"aria-labelledby":l}}}),[i,s,l,u]);const m=e.useCallback((e=>{let{active:t,selected:n}=e;const o={role:"option",...t&&{id:s+"-option"}};switch(u){case"select":return{...o,"aria-selected":t&&n};case"combobox":return{...o,...t&&{"aria-selected":true}}}return{}}),[s,u]);return e.useMemo((()=>c?{reference:d,floating:v,item:m}:{}),[c,d,v,m])}const camelCaseToKebabCase=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,((e,t)=>(t?"-":"")+e.toLowerCase()));function execWithArgsOrReturn(e,t){return typeof e==="function"?e(t):e}function useDelayUnmount(t,n){const[o,r]=e.useState(t);t&&!o&&r(true);e.useEffect((()=>{if(!t&&o){const e=setTimeout((()=>r(false)),n);return()=>clearTimeout(e)}}),[t,o,n]);return o}function useTransitionStatus(t,n){n===void 0&&(n={});const{open:o,elements:{floating:r}}=t;const{duration:s=250}=n;const c=typeof s==="number";const u=(c?s:s.close)||0;const[i,l]=e.useState("unmounted");const a=useDelayUnmount(o,u);a||i!=="close"||l("unmounted");Y((()=>{if(r){if(o){l("initial");const e=requestAnimationFrame((()=>{l("open")}));return()=>{cancelAnimationFrame(e)}}l("close")}}),[o,r]);return{isMounted:a,status:i}}function useTransitionStyles(t,n){n===void 0&&(n={});const{initial:o={opacity:0},open:r,close:s,common:c,duration:u=250}=n;const i=t.placement;const l=i.split("-")[0];const a=e.useMemo((()=>({side:l,placement:i})),[l,i]);const f=typeof u==="number";const d=(f?u:u.open)||0;const v=(f?u:u.close)||0;const[m,g]=e.useState((()=>({...execWithArgsOrReturn(c,a),...execWithArgsOrReturn(o,a)})));const{isMounted:p,status:h}=useTransitionStatus(t,{duration:u});const b=useLatestRef(o);const y=useLatestRef(r);const E=useLatestRef(s);const x=useLatestRef(c);Y((()=>{const e=execWithArgsOrReturn(b.current,a);const t=execWithArgsOrReturn(E.current,a);const n=execWithArgsOrReturn(x.current,a);const o=execWithArgsOrReturn(y.current,a)||Object.keys(e).reduce(((e,t)=>{e[t]="";return e}),{});h==="initial"&&g((t=>({transitionProperty:t.transitionProperty,...n,...e})));h==="open"&&g({transitionProperty:Object.keys(o).map(camelCaseToKebabCase).join(","),transitionDuration:d+"ms",...n,...o});if(h==="close"){const o=t||e;g({transitionProperty:Object.keys(o).map(camelCaseToKebabCase).join(","),transitionDuration:v+"ms",...n,...o})}}),[v,E,b,y,x,d,h,a]);return{isMounted:p,styles:m}}function useTypeahead(t,n){var o;const{open:s,dataRef:c}=t;const{listRef:u,activeIndex:i,onMatch:l,onTypingChange:a,enabled:f=true,findMatch:d=null,resetMs:v=750,ignoreKeys:m=[],selectedIndex:g=null}=n;const p=e.useRef();const h=e.useRef("");const b=e.useRef((o=g!=null?g:i)!=null?o:-1);const y=e.useRef(null);const E=useEffectEvent(l);const x=useEffectEvent(a);const w=useLatestRef(d);const R=useLatestRef(m);Y((()=>{if(s){clearTimeout(p.current);y.current=null;h.current=""}}),[s]);Y((()=>{if(s&&h.current===""){var e;b.current=(e=g!=null?g:i)!=null?e:-1}}),[s,g,i]);const I=useEffectEvent((e=>{if(e){if(!c.current.typing){c.current.typing=e;x(e)}}else if(c.current.typing){c.current.typing=e;x(e)}}));const M=useEffectEvent((e=>{function getMatchingIndex(e,t,n){const o=w.current?w.current(t,n):t.find((e=>(e==null?void 0:e.toLocaleLowerCase().indexOf(n.toLocaleLowerCase()))===0));return o?e.indexOf(o):-1}const t=u.current;h.current.length>0&&h.current[0]!==" "&&(getMatchingIndex(t,t,h.current)===-1?I(false):e.key===" "&&r(e));if(t==null||R.current.includes(e.key)||e.key.length!==1||e.ctrlKey||e.metaKey||e.altKey)return;if(s&&e.key!==" "){r(e);I(true)}const n=t.every((e=>{var t,n;return!e||((t=e[0])==null?void 0:t.toLocaleLowerCase())!==((n=e[1])==null?void 0:n.toLocaleLowerCase())}));if(n&&h.current===e.key){h.current="";b.current=y.current}h.current+=e.key;clearTimeout(p.current);p.current=setTimeout((()=>{h.current="";b.current=y.current;I(false)}),v);const o=b.current;const c=getMatchingIndex(t,[...t.slice((o||0)+1),...t.slice(0,(o||0)+1)],h.current);if(c!==-1){E(c);y.current=c}else if(e.key!==" "){h.current="";I(false)}}));const C=e.useMemo((()=>({onKeyDown:M})),[M]);const O=e.useMemo((()=>({onKeyDown:M,onKeyUp(e){e.key===" "&&I(false)}})),[M,I]);return e.useMemo((()=>f?{reference:C,floating:O}:{}),[f,C,O])}function getArgsWithCustomFloatingHeight(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const inner=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:o,onFallbackChange:r,offset:s=0,index:c=0,minItemsVisible:u=4,referenceOverflowThreshold:i=0,scrollRef:l,...a}=w(e,t);const{rects:f,elements:{floating:d}}=t;const v=n.current[c];const m=(l==null?void 0:l.current)||d;const g=d.clientTop||m.clientTop;const p=d.clientTop!==0;const h=m.clientTop!==0;const b=d===m;process.env.NODE_ENV!=="production"&&(t.placement.startsWith("bottom")||warn('`placement` side must be "bottom" when using the `inner`',"middleware."));if(!v)return{};const y={...t,...await B(-v.offsetTop-d.clientTop-f.reference.height/2-v.offsetHeight/2-s).fn(t)};const E=await _(getArgsWithCustomFloatingHeight(y,m.scrollHeight+g+d.clientTop),a);const x=await _(y,{...a,elementContext:"reference"});const M=R(0,E.top);const C=y.y+M;const O=m.scrollHeight>m.clientHeight;const k=O?e=>e:I;const T=k(R(0,m.scrollHeight+(p&&b||h?g*2:0)-M-R(0,E.bottom)));m.style.maxHeight=T+"px";m.scrollTop=M;if(r){const e=O&&m.offsetHeight<v.offsetHeight*u-1||x.top>=-i||x.bottom>=-i;N.flushSync((()=>r(e)))}o&&(o.current=await _(getArgsWithCustomFloatingHeight({...y,y:C},m.offsetHeight+g+d.clientTop),a));return{y:C}}});function useInnerOffset(t,n){const{open:o,elements:r}=t;const{enabled:s=true,overflowRef:c,scrollRef:u,onChange:i}=n;const l=useEffectEvent(i);const a=e.useRef(false);const f=e.useRef(null);const d=e.useRef(null);e.useEffect((()=>{if(!s)return;function onWheel(t){if(t.ctrlKey||!e||c.current==null)return;const n=t.deltaY;const o=c.current.top>=-.5;const r=c.current.bottom>=-.5;const s=e.scrollHeight-e.clientHeight;const u=n<0?-1:1;const i=n<0?"max":"min";if(!(e.scrollHeight<=e.clientHeight))if(!o&&n>0||!r&&n<0){t.preventDefault();N.flushSync((()=>{l((e=>e+Math[i](n,s*u)))}))}else/firefox/i.test(E())&&(e.scrollTop+=n)}const e=(u==null?void 0:u.current)||r.floating;if(o&&e){e.addEventListener("wheel",onWheel);requestAnimationFrame((()=>{f.current=e.scrollTop;c.current!=null&&(d.current={...c.current})}));return()=>{f.current=null;d.current=null;e.removeEventListener("wheel",onWheel)}}}),[s,o,r.floating,c,u,l]);const v=e.useMemo((()=>({onKeyDown(){a.current=true},onWheel(){a.current=false},onPointerMove(){a.current=false},onScroll(){const e=(u==null?void 0:u.current)||r.floating;if(c.current&&e&&a.current){if(f.current!==null){const t=e.scrollTop-f.current;(c.current.bottom<-.5&&t<-1||c.current.top<-.5&&t>1)&&N.flushSync((()=>l((e=>e+t))))}requestAnimationFrame((()=>{f.current=e.scrollTop}))}}})),[r.floating,l,c,u]);return e.useMemo((()=>s?{floating:v}:{}),[s,v])}function isPointInPolygon(e,t){const[n,o]=e;let r=false;const s=t.length;for(let e=0,c=s-1;e<s;c=e++){const[s,u]=t[e]||[0,0];const[i,l]=t[c]||[0,0];const a=u>=o!==l>=o&&n<=(i-s)*(o-u)/(l-u)+s;a&&(r=!r)}return r}function isInside(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function safePolygon(e){e===void 0&&(e={});const{buffer:t=.5,blockPointerEvents:n=false,requireIntent:o=true}=e;let r;let s=false;let c=null;let i=null;let l=performance.now();function getCursorSpeed(e,t){const n=performance.now();const o=n-l;if(c===null||i===null||o===0){c=e;i=t;l=n;return null}const r=e-c;const s=t-i;const u=Math.sqrt(r*r+s*s);const a=u/o;c=e;i=t;l=n;return a}const fn=e=>{let{x:n,y:c,placement:i,elements:l,onClose:a,nodeId:d,tree:v}=e;return function onMouseMove(e){function close(){clearTimeout(r);a()}clearTimeout(r);if(!l.domReference||!l.floating||i==null||n==null||c==null)return;const{clientX:m,clientY:g}=e;const p=[m,g];const h=f(e);const b=e.type==="mouseleave";const y=u(l.floating,h);const E=u(l.domReference,h);const x=l.domReference.getBoundingClientRect();const w=l.floating.getBoundingClientRect();const R=i.split("-")[0];const I=n>w.right-w.width/2;const M=c>w.bottom-w.height/2;const O=isInside(p,x);const k=w.width>x.width;const T=w.height>x.height;const D=(k?x:w).left;const F=(k?x:w).right;const L=(T?x:w).top;const P=(T?x:w).bottom;if(y){s=true;if(!b)return}E&&(s=false);if(E&&!b){s=true;return}if(b&&C(e.relatedTarget)&&u(l.floating,e.relatedTarget))return;if(v&&getChildren(v.nodesRef.current,d).some((e=>{let{context:t}=e;return t==null?void 0:t.open})))return;if(R==="top"&&c>=x.bottom-1||R==="bottom"&&c<=x.top+1||R==="left"&&n>=x.right-1||R==="right"&&n<=x.left+1)return close();let S=[];switch(R){case"top":S=[[D,x.top+1],[D,w.bottom-1],[F,w.bottom-1],[F,x.top+1]];break;case"bottom":S=[[D,w.top+1],[D,x.bottom-1],[F,x.bottom-1],[F,w.top+1]];break;case"left":S=[[w.right-1,P],[w.right-1,L],[x.left+1,L],[x.left+1,P]];break;case"right":S=[[x.right-1,P],[x.right-1,L],[w.left+1,L],[w.left+1,P]];break}function getPolygon(e){let[n,o]=e;switch(R){case"top":{const e=[k?n+t/2:I?n+t*4:n-t*4,o+t+1];const r=[k?n-t/2:I?n+t*4:n-t*4,o+t+1];const s=[[w.left,I||k?w.bottom-t:w.top],[w.right,I?k?w.bottom-t:w.top:w.bottom-t]];return[e,r,...s]}case"bottom":{const e=[k?n+t/2:I?n+t*4:n-t*4,o-t];const r=[k?n-t/2:I?n+t*4:n-t*4,o-t];const s=[[w.left,I||k?w.top+t:w.bottom],[w.right,I?k?w.top+t:w.bottom:w.top+t]];return[e,r,...s]}case"left":{const e=[n+t+1,T?o+t/2:M?o+t*4:o-t*4];const r=[n+t+1,T?o-t/2:M?o+t*4:o-t*4];const s=[[M||T?w.right-t:w.left,w.top],[M?T?w.right-t:w.left:w.right-t,w.bottom]];return[...s,e,r]}case"right":{const e=[n-t,T?o+t/2:M?o+t*4:o-t*4];const r=[n-t,T?o-t/2:M?o+t*4:o-t*4];const s=[[M||T?w.left+t:w.right,w.top],[M?T?w.left+t:w.right:w.left+t,w.bottom]];return[e,r,...s]}}}if(!isPointInPolygon([m,g],S)){if(s&&!O)return close();if(!b&&o){const t=getCursorSpeed(e.clientX,e.clientY);const n=.1;if(t!==null&&t<n)return close()}isPointInPolygon([m,g],getPolygon([n,c]))?!s&&o&&(r=window.setTimeout(close,40)):close()}}};fn.__options={blockPointerEvents:n};return fn}export{ee as Composite,te as CompositeItem,ue as FloatingArrow,FloatingDelayGroup,FloatingFocusManager,FloatingList,FloatingNode,Ce as FloatingOverlay,FloatingPortal,FloatingTree,inner,safePolygon,useClick,useClientPoint,useDelayGroup,useDelayGroupContext,useDismiss,useFloating,useFloatingNodeId,useFloatingParentNodeId,useFloatingPortalNode,useFloatingRootContext,useFloatingTree,useFocus,useHover,se as useId,useInnerOffset,useInteractions,useListItem,useListNavigation,useMergeRefs,useRole,useTransitionStatus,useTransitionStyles,useTypeahead};

